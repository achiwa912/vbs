{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}

{% block title %}Mntr{% endblock %}

{% block page_content %}

{% if current_user.is_authenticated %}
<h2>My Books <a href="/add-book"><button type="button" class="btn btn-primary">Add</button></a></h2>
<hr>
<p>Choose a book to practice.</p>

{% for my_book in my_books %}
<a href="/book/{{ my_book.id }}">
  <div class="card text-white bg-primary mb-3" style="max-width: 20rem;">
    <div class="card-header">{{ my_book.name }}</div>
    <div class="card-body">
      <p class="card-text">
	{{ my_book.words|length }} words<br>
	created: {{ my_book.createtime.date() }}
      </p>
    </div>
  </div>
</a>
{% endfor %}

<h2>Read it aloud! (experimental)</h2>
<hr>

<h3>SpeechSynthesis</h3>
<p></p>
<p><textarea class="form-control" id="MyTextarea" rows="3"></textarea></p>
<p><a onclick="javascript:speechWord();"><button type="button" class="btn btn-primary">Submit</button></a></p>

<br>

<h3>Google Text-to-Speech</h3>
Use browser back button to come back to this page.
<div class="col-md-10">
  {{ wtf.render_form(form) }}
</div>

<hr>
<h4>Backup and restore</h4>
<p>You can export your books and progress to a local file in case your data is lost.</p>
<p>
<a href="/export"><button type="button" class="btn btn-info btn-sm">Export all</button></a>
<a href="/import"><button type="button" class="btn btn-danger btn-sm">Import and restore</button></a>
</p>

<script>
  function speechWord()
  {
      var value = document.getElementById('MyTextarea').value
      var msg = new SpeechSynthesisUtterance(value);
      window.speechSynthesis.speak(msg);
  }
</script>

{% else %}
<h1>Welcome to Vocabull!</h1>
<hr>
<p>This is the right place to build your vocabularly skills.</p>
<p>Click the menu icon at the top-right corner and choose login.  Then, click "Click here to register" to create your account.</p>
{% endif %}
<hr>
<p class="text-secondary"><span class="badge bg-primary">Vocabull</span> - Copyright 2023 Kyosuke Achiwa.  All rights reserved.</p>

{% endblock %}
